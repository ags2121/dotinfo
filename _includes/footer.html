<footer>
  <img src="https://ia802705.us.archive.org/29/items/publicradioinfo/pr-radio-footer.png">
  <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

  <script>
    var 
      audioPlayer = $('audio')[0],
      audioSource = $('audio').find('source'),
      feedsURL = 'https://uj4e5o7uf1.execute-api.us-west-2.amazonaws.com/prod/feeds';

    loadAudio($('#news').find('.bbc-headlines').attr('href')); // set default audio
    $('.listen').on('click', playAudioHandler);
    window.addEventListener('keydown', onKeyDown, false);

    function playAudioHandler (e) {
      e.preventDefault();
      var clickedAudio = e.target.href; 

      if (clickedSameAudio(clickedAudio)) {
        if (audioPlayer.paused) {
          audioPlayer.play();
        } else {
          audioPlayer.pause();  
        }
        return;
      }

      playAudio(clickedAudio);
    }

    function playAudio (audioUrl) {
      loadAudio(audioUrl);
      audioPlayer.oncanplaythrough = audioPlayer.play();
    }

    function loadAudio (audioUrl) {
      audioSource.attr('src', audioUrl);
      audioPlayer.pause();
      audioPlayer.load();
    }

    function clickedSameAudio (currentAudioSrc) {
      return !audioPlayer.ended && (0 < audioPlayer.currentTime)
      && currentAudioSrc === audioSource.attr('src');
    }

    function onKeyDown (e) {
      switch (e.keyCode) {
        case 32: //spacebar                    
          e.preventDefault();
          if (audioPlayer.paused) {            
              audioPlayer.play();
          } else {
              audioPlayer.pause();
          } 
          break;
        case 37: //back arrow
          audioPlayer.currentTime -= 15
          break;
        case 39: //forward arrow
          audioPlayer.currentTime += 15
          break;
      }
      return false;
    }

    $.ajax({
      url: feedsURL,
      type: 'GET',
      dataType: 'JSON',
      success: function (data) {
        var news = $('#news');
        news.find('.npr').attr('href', data['npr']);
        news.find('.bbc-global').attr('href', data['bbc-global']);
        news.find('.pri').attr('href', data['pri']);
      }
    });

  </script>
</footer>
